syntax = "proto3";

package sentiric.tts.v1;

// DÜZELTME: Kullanılmayan import kaldırıldı.
// import "sentiric/tts/v1/coqui.proto"; 

option go_package = "github.com/sentiric/sentiric-contracts/gen/go/sentiric/tts/v1;ttsv1";

// =============================================================================
// TTS GATEWAY SERVICE (PUBLIC FACING)
// =============================================================================

service TtsGatewayService {
  // Unary
  rpc Synthesize(SynthesizeRequest) returns (SynthesizeResponse);

  // Stream
  rpc SynthesizeStream(SynthesizeStreamRequest) returns (stream SynthesizeStreamResponse);
  
  rpc ListVoices(ListVoicesRequest) returns (ListVoicesResponse);
}

// =============================================================================
// MESAJ TANIMLARI
// =============================================================================

// --- Unary ---
message SynthesizeRequest {
  string text = 1;
  TextType text_type = 2;
  string voice_id = 3;
  AudioConfig audio_config = 4;
  string preferred_provider = 5;
  ProsodyConfig prosody = 6;
}

message SynthesizeResponse {
  bytes audio_content = 1;
  string content_type = 2;
  string provider_used = 3;
}

// --- Stream ---
message SynthesizeStreamRequest {
  string text = 1;
  TextType text_type = 2;
  string voice_id = 3;
  AudioConfig audio_config = 4;
  string preferred_provider = 5;
  ProsodyConfig prosody = 6;
}

message SynthesizeStreamResponse {
  bytes audio_content = 1;
  string content_type = 2;
  string provider_used = 3;
}

// --- Common ---
message ListVoicesRequest {
  string language_code = 1;
}

message ListVoicesResponse {
  repeated VoiceInfo voices = 1;
}

// =============================================================================
// YARDIMCI TİPLER & ENUMLAR
// =============================================================================

enum TextType {
  TEXT_TYPE_UNSPECIFIED = 0;
  TEXT_TYPE_TEXT = 1;
  TEXT_TYPE_SSML = 2;
}

enum AudioFormat {
  AUDIO_FORMAT_UNSPECIFIED = 0;
  AUDIO_FORMAT_PCM_S16LE = 1;
  AUDIO_FORMAT_WAV = 2;
  AUDIO_FORMAT_MP3 = 3;
  AUDIO_FORMAT_OGG_OPUS = 4;
  AUDIO_FORMAT_MULAW = 5;
}

message AudioConfig {
  AudioFormat audio_format = 1;
  int32 sample_rate_hertz = 2;
  double volume_gain_db = 3;
}

message ProsodyConfig {
  double rate = 1;
  double pitch = 2;
  string emotion = 3;
}

message VoiceInfo {
  string id = 1;
  string name = 2;
  string language = 3;
  string gender = 4;
  repeated string styles = 5;
}
syntax = "proto3";

package sentiric.media.v1;

option go_package = "github.com/sentiric/sentiric-contracts/gen/go/sentiric/media/v1;mediav1";

service MediaService {
  rpc AllocatePort(AllocatePortRequest) returns (AllocatePortResponse);
  rpc ReleasePort(ReleasePortRequest) returns (ReleasePortResponse);
  
  // YENİ EKLENEN RPC:
  // Belirtilen RTP portuna bir ses dosyası çalmak için komut gönderir.
  rpc PlayAudio(PlayAudioRequest) returns (PlayAudioResponse);
}

message AllocatePortRequest {
  string call_id = 1;
}

message AllocatePortResponse {
  uint32 rtp_port = 1;
}

message ReleasePortRequest {
  uint32 rtp_port = 1;
}

message ReleasePortResponse {
  bool success = 1;
}

// YENİ EKLENEN MESAJLAR:
message PlayAudioRequest {
  // Hangi çağrıya ait olduğunu bilmek için.
  string call_id = 1;
  // Hangi RTP portuna ses gönderileceği.
  uint32 rtp_port = 2;
  // Çalınacak ses dosyasının kimliği (ID) veya yolu.
  // Örn: "sounds/welcome_tr.wav"
  string audio_id = 3;
}

message PlayAudioResponse {
  // İşlemin başarıyla başlayıp başlamadığını belirtir.
  bool success = 1;
}
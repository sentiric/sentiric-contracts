syntax = "proto3";

package sentiric.mobile.v1;

option go_package = "github.com/sentiric/sentiric-contracts/gen/go/sentiric/mobile/v1;mobilev1";

service MobileGatewayService {
  // Linter Kuralı: Request/Response isimleri RPC ile eşleşmeli.
  rpc StreamSession(stream StreamSessionRequest) returns (stream StreamSessionResponse);
}

message StreamSessionRequest {
  oneof data {
    SessionConfig config = 1;
    bytes audio_chunk = 2;
    string text_message = 3;
    SessionControl control = 4;
  }
}

message StreamSessionResponse {
  oneof data {
    bytes audio_response = 1;
    string text_response = 2;
    string status_update = 3;
  }
}

message SessionConfig {
  string token = 1;
  string language = 2;
  uint32 sample_rate = 3;
}

message SessionControl {
  enum EventType {
    // Linter Kuralı: 0 değeri _UNSPECIFIED ile bitmeli.
    EVENT_TYPE_UNSPECIFIED = 0;
    // Linter Kuralı: Değerler ENUM_NAME_ ile başlamalı.
    EVENT_TYPE_INTERRUPT = 1;
    EVENT_TYPE_EOS = 2;
    EVENT_TYPE_HANGUP = 3;
  }
  EventType event = 1;
}
version: v1
plugins:
  # Go
  - plugin: buf.build/protocolbuffers/go
    out: gen/go
    opt: paths=source_relative
  - plugin: buf.build/grpc/go
    out: gen/go
    opt: paths=source_relative,require_unimplemented_servers=false

  # Python
  - plugin: buf.build/grpc/python
    out: gen/python
  - plugin: buf.build/protocolbuffers/python
    out: gen/python

  # Rust (Düzeltilmiş)
  # 'prost-crate' plugin'i kaldırıldı, çünkü 'prost' ve 'tonic' zaten
  # temel kod üretimini yapıyor. Paketleme (crate) işini CI'da manuel
  # olarak veya ayrı bir build.rs ile yönetmek daha esnek olacak.
  # Bu değişiklik, en temel ve hatasız kod üretimini garanti eder.
  - plugin: buf.build/community/neoeinstein-prost
    out: gen/rust
  - plugin: buf.build/community/neoeinstein-tonic
    out: gen/rust